extends Node2D

var player_in_range = false

@onready var player = $player
@onready var player_cam = $player/Camera2D
@onready var cutscene_cam = $"AnimationPlayer/Cutscene camera"
@onready var anim_player = $AnimationPlayer
@onready var detection_area = $Area2D

func _ready():
	detection_area.body_entered.connect(_on_area_enter)
	detection_area.body_exited.connect(_on_area_exit)


func _on_area_enter(body):
	if body == player:
		player_in_range = true


func _on_area_exit(body):
	if body == player:
		player_in_range = false


func _input(event):
	if player_in_range and event.is_action_pressed("dash"):
		start_cutscene()


func start_cutscene():
	print("Cutscene starting...")

	cutscene_cam.make_current()
	anim_player.play("elder_walk_off")
